<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Malaysian Architects AR</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <style>
      body { margin: 0; background-color: #1a1a2e; font-family: 'Lato', sans-serif; overflow: hidden; }
      
      /* --- AR VIEWER STYLING --- */
      model-viewer {
        width: 100%; height: 100vh;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        --poster-color: transparent;
      }

      /* --- INFO CARD (Top Center) --- */
      #info-panel {
        position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
        width: 85%; max-width: 400px;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px; border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        text-align: center; border: 2px solid #f1c40f;
        transition: opacity 0.3s;
      }
      
      h1 { margin: 0 0 5px 0; font-family: 'Cinzel', serif; color: #2c3e50; font-size: 22px; }
      p { margin: 0; font-size: 14px; color: #555; line-height: 1.4; }

      /* --- BOTTOM CONTROLS --- */
      #controls {
        position: absolute; bottom: 30px; width: 100%;
        display: flex; justify-content: center; gap: 15px;
        pointer-events: none; /* Let touches pass through around buttons */
      }

      .btn {
        pointer-events: auto; /* Re-enable clicking */
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border: 2px solid white; color: white;
        padding: 12px 24px; border-radius: 30px;
        font-weight: bold; cursor: pointer;
        transition: all 0.2s ease;
        font-family: 'Cinzel', serif;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
      }

      .btn.active {
        background: #f1c40f; color: #1a1a2e; border-color: #f1c40f;
        transform: scale(1.1); text-shadow: none;
      }

      /* --- ERROR MESSAGE --- */
      #error-msg {
        display: none; position: absolute; top: 50%; left: 50%; 
        transform: translate(-50%, -50%); color: #e74c3c; 
        background: white; padding: 20px; border-radius: 10px; text-align: center;
      }

    </style>
  </head>
  <body>

    <model-viewer 
      id="viewer"
      src="./hubback.glb" 
      ios-src="./hubback.usdz"
      alt="Architectural Figure"
      shadow-intensity="1"
      camera-controls
      auto-rotate
      ar
      ar-modes="webxr scene-viewer quick-look"
      ar-scale="auto"
    >
      <button slot="ar-button" style="background-color: white; border-radius: 20px; border: none; position: absolute; top: 16px; right: 16px; padding: 10px 20px; font-weight:bold; color:#2c3e50;">
        ðŸ‘‹ VIEW IN AR
      </button>
    </model-viewer>

    <div id="info-panel">
      <h1 id="name">A.B. HUBBACK</h1>
      <p id="desc">Renowned for designing the Jamek Mosque and the Kuala Lumpur Railway Station in the Indo-Saracenic style.</p>
    </div>

    <div id="error-msg">
      <strong>Model Not Found!</strong><br>
      Please make sure "hubback.glb" is in the folder.
    </div>

    <div id="controls">
      <button class="btn active" onclick="loadModel('hubback', this)">HUBBACK</button>
      <button class="btn" onclick="loadModel('norman', this)">NORMAN</button>
    </div>

    <script>
      // 1. DEFINE DATA
      const data = {
        hubback: {
          file: './hubback.glb',
          name: "A.B. HUBBACK",
          desc: "Renowned for designing the Jamek Mosque and the Kuala Lumpur Railway Station in the Indo-Saracenic style."
        },
        norman: {
          file: './norman.glb',
          name: "A.C. NORMAN",
          desc: "The Government Architect who created the ground plans for the Sultan Abdul Samad Building."
        }
      };

      // 2. GET ELEMENTS
      const viewer = document.getElementById('viewer');
      const nameEl = document.getElementById('name');
      const descEl = document.getElementById('desc');
      const errorEl = document.getElementById('error-msg');

      // 3. SWAP FUNCTION
      function loadModel(id, btn) {
        // UI Updates
        document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Hide Error
        errorEl.style.display = 'none';

        // Update Text
        nameEl.innerText = data[id].name;
        descEl.innerText = data[id].desc;

        // Change Model
        viewer.src = data[id].file;
      }

      // 4. ERROR HANDLING
      // If the browser cannot find your .glb file, it will trigger this error.
      viewer.addEventListener('error', (e) => {
        console.log("Error loading model:", e);
        errorEl.style.display = 'block';
      });

    </script>
  </body>
</html>